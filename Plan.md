# **Планировании автоматизации тестирования**

### **Перечень сценариев для начала тестирования**

1. gate-simulator запускается
2. Приложение aqa-shop.jar запускается
3. Приложение aqa-shop.jar поддерживает работу с MySQL
4. Приложение aqa-shop.jar поддерживает работу с PostgreSQL

### **Перечень автоматизируемых сценариев**

1. **Страница "Путешествие дня" доступна по адресу localhost:8080**

*Шаги:*

    1. Открыть браузер
    2. Перейти по адресу: localhost:8080
	3. Проверить, что страница "Путешествие дня" открылась

*Ожидаемый результат:* Страница "Путешествие дня" открылась

2. **Заявка "Кредит по данным карты", заполненная валидными данными карты со статусом *Approved* успешно одобрена банком**
  
  *Шаги:*

    1. В браузере перейти по адресу localhost:8080
    2. Нажать кнопку "Купить в кредит"
    3. Проверить, что название формы - "Кредит по данным карты"
    4. В поле "Номер карты" ввести: 4444 4444 4444 4441
    5. В поле "Месяц" ввести: 08
    6. В поле "Год" ввести: 22
    7. В поле "Владелец" ввести: Ivanov Ivan
    8. В поле "CVC/CVV" ввести: 999
    9. Нажать кнопку "Продолжить"

  *Ожидаемый результат:* Выведено сообщение "Успешно. Операция одобрена банком"

3. **Заявка "Оплата по карте", заполненная валидными данными карты со статусом *Approved* успешно одобрена банком**

  *Шаги:*

    1. В браузере перейти по адресу localhost:8080
    2. Нажать кнопку "Купить"
    3. Проверить, что название формы - "Оплата по карте"
    4. В поле "Номер карты" ввести: 4444 4444 4444 4441
    5. В поле "Месяц" ввести: 08
    6. В поле "Год" ввести: 22
    7. В поле "Владелец" ввести: Ivanov Ivan
    8. В поле "CVC/CVV" ввести: 999
    9. Нажать кнопку "Продолжить"

*Ожидаемый результат:* Выведено сообщение "Успешно. Операция одобрена банком"

4. **Заявка "Кредит по данным карты", заполненная данными карты со статусом *Declined* отклонена банком**
  
  *Шаги:*

    1. В браузере перейти по адресу localhost:8080
    2. Нажать кнопку "Купить в кредит"
    3. Проверить, что название формы - "Кредит по данным карты"
    4. В поле "Номер карты" ввести: 4444 4444 4444 4442
    5. В поле "Месяц" ввести: 08
    6. В поле "Год" ввести: 22
    7. В поле "Владелец" ввести: Ivanov Ivan
    8. В поле "CVC/CVV" ввести: 999
    9. Нажать кнопку "Продолжить"

  *Ожидаемый результат:* Выведено сообщение "Ошибка. Банк отказал а проведении операции"


5. **Заявка "Оплата по карте", заполненная данными карты со статусом *Declined* отклонена банком**

  *Шаги:*

    1. В браузере перейти по адресу localhost:8080
    2. Нажать кнопку "Купить"
    3. Проверить, что название формы - "Оплата по карте"
    4. В поле "Номер карты" ввести: 4444 4444 4444 4442
    5. В поле "Месяц" ввести: 08
    6. В поле "Год" ввести: 22
    7. В поле "Владелец" ввести: Ivanov Ivan
    8. В поле "CVC/CVV" ввести: 999
    9. Нажать кнопку "Продолжить"

  *Ожидаемый результат:* Выведено сообщение "Ошибка. Банк отказал а проведении операции"


6. **Заявка "Кредит по данным карты", заполненная невалидными данными карты, отклонена банком**

  *Шаги:*

    1. В браузере перейти по адресу localhost:8080
    2. Нажать кнопку "Купить в кредит "
    3. Проверить, что название формы - "Кредит по данным карты"
    4. В поле "Номер карты" ввести: 5555 5555 5555 5555
    5. В поле "Месяц" ввести: 09
    6. В поле "Год" ввести: 21
    7. В поле "Владелец" ввести: Petrov Petr
    8. В поле "CVC/CVV" ввести: 100
    9. Нажать кнопку "Продолжить"

  *Ожидаемый результат:* Выведено сообщение "Ошибка. Банк отказал а проведении операции"

7. **Заявка "Оплата по карте", заполненная невалидными данными карты, отклонена банком**

  *Шаги:*

    1. В браузере перейти по адресу localhost:8080
    2. Нажать кнопку "Купить"
    3. Проверить, что название формы - "Оплата по карте"
    4. В поле "Номер карты" ввести: 5555 5555 5555 5555
    5. В поле "Месяц" ввести: 09
    6. В поле "Год" ввести: 21
    7. В поле "Владелец" ввести: Petrov Petr
    8. В поле "CVC/CVV" ввести: 100
    9. Нажать кнопку "Продолжить"

  *Ожидаемый результат:* Выведено сообщение "Ошибка. Банк отказал а проведении операции"

8. **Заявка "Оплата по карте" не отправляется со значением года прошлого периода в поле "Год"**

  *Шаги:*

    1. В браузере перейти по адресу localhost:8080
    2. Нажать кнопку "Купить"
    3. Проверить, что название формы - "Оплата по карте"
    4. В поле "Номер карты" ввести: 5555 5555 5555 5555
    5. В поле "Месяц" ввести: 10
    6. В поле "Год" ввести: 12
    7. Поле "Владелец" ввести: Ivanov Ivan
    8. В поле "CVC/CVV" ввести: 303
    9. Нажать кнопку "Продолжить"

  *Ожидаемый результат:* У поля ввода "Год" сообщения об ошибке "Истёк срок действия карты". Заявка не отправляется.

9. **Заявка "Оплата по карте" не отправляется со значением года далекого будущего периода в поле "Год"**

  *Шаги:*

    1. В браузере перейти по адресу localhost:8080
    2. Нажать кнопку "Купить"
    3. Проверить, что название формы - "Оплата по карте"
    4. В поле "Номер карты" ввести: 5555 5555 5555 5555
    5. В поле "Месяц" ввести: 10
    6. В поле "Год" ввести: 55
    7. Поле "Владелец" ввести: Ivanov Ivan
    8. В поле "CVC/CVV" ввести: 303
    9. Нажать кнопку "Продолжить"

  *Ожидаемый результат:* У поля ввода "Год" сообщения об ошибке "Неверно указан срок действия карты". Заявка не отправляется.

10. **Заявка "Кредит по данным карты" не отправляется со значением года прошлого периода в поле "Год"**

  *Шаги:*

    1. В браузере перейти по адресу localhost:8080
    2. Нажать кнопку "Купить в кредит "
    3. Проверить, что название формы - "Кредит по данным карты"
    4. В поле "Номер карты" ввести: 5555 5555 5555 5555
    5. В поле "Месяц" ввести: 10
    6. В поле "Год" ввести: 12
    7. Поле "Владелец" ввести: Ivanov Ivan
    8. В поле "CVC/CVV" ввести: 303
    9. Нажать кнопку "Продолжить"

  *Ожидаемый результат:* У поля ввода "Год" сообщения об ошибке "Истёк срок действия карты". Заявка не отправляется.

11. **Заявка "Кредит по данным карты" не отправляется со значением года далекого будущего периода в поле "Год"**

  *Шаги:*

    1. В браузере перейти по адресу localhost:8080
    2. Нажать кнопку "Купить в кредит "
    3. Проверить, что название формы - "Кредит по данным карты"
    4. В поле "Номер карты" ввести: 5555 5555 5555 5555
    5. В поле "Месяц" ввести: 10
    6. В поле "Год" ввести: 55
    7. Поле "Владелец" ввести: Ivanov Ivan
    8. В поле "CVC/CVV" ввести: 303
    9. Нажать кнопку "Продолжить"

  *Ожидаемый результат:* У поля ввода "Год" сообщения об ошибке "Неверно указан срок действия карты". Заявка не отправляется.

12. **Заявка "Оплата по карте" не отправляется со значением месяца, больше "12", в поле "Месяц"**

  *Шаги:*

    1. В браузере перейти по адресу localhost:8080
    2. Нажать кнопку "Купить"
    3. Проверить, что название формы - "Оплата по карте"
    4. В поле "Номер карты" ввести: 5555 5555 5555 5555
    5. В поле "Месяц" ввести: 13
    6. В поле "Год" ввести: 21
    7. Поле "Владелец" ввести: Ivanov Ivan
    8. В поле "CVC/CVV" ввести: 303
    9. Нажать кнопку "Продолжить"

  *Ожидаемый результат:* У поля ввода "Месяц" сообщения об ошибке "Неверно указан срок действия карты". Заявка не отправляется.

13. **Заявка "Оплата по карте" не отправляется со значением месяца, меньше "01", в поле "Месяц"**

  *Шаги:*

    1. В браузере перейти по адресу localhost:8080
    2. Нажать кнопку "Купить"
    3. Проверить, что название формы - "Оплата по карте"
    4. В поле "Номер карты" ввести: 5555 5555 5555 5555
    5. В поле "Месяц" ввести: 00
    6. В поле "Год" ввести: 21
    7. Поле "Владелец" ввести: Ivanov Ivan
    8. В поле "CVC/CVV" ввести: 303
    9. Нажать кнопку "Продолжить"

  *Ожидаемый результат:* У поля ввода "Месяц" сообщения об ошибке "Неверно указан срок действия карты". Заявка не отправляется.

14. **Заявка "Кредит по данным карты" не отправляется со значением месяца, больше "12", в поле "Месяц"**

  *Шаги:*

    1. В браузере перейти по адресу localhost:8080
    2. Нажать кнопку "Купить в кредит "
    3. Проверить, что название формы - "Кредит по данным карты"
    4. В поле "Номер карты" ввести: 5555 5555 5555 5555
    5. В поле "Месяц" ввести: 13
    6. В поле "Год" ввести: 21
    7. Поле "Владелец" ввести: Ivanov Ivan
    8. В поле "CVC/CVV" ввести: 303
    9. Нажать кнопку "Продолжить"

  *Ожидаемый результат:* У поля ввода "Месяц" сообщения об ошибке "Неверно указан срок действия карты". Заявка не отправляется.

15. **Заявка "Кредит по данным карты" не отправляется со значением месяца, меньше "01", в поле "Месяц"**

  *Шаги:*

    1. В браузере перейти по адресу localhost:8080
    2. Нажать кнопку "Купить в кредит "
    3. Проверить, что название формы - "Кредит по данным карты"
    4. В поле "Номер карты" ввести: 5555 5555 5555 5555
    5. В поле "Месяц" ввести: 00
    6. В поле "Год" ввести: 21
    7. Поле "Владелец" ввести: Ivanov Ivan
    8. В поле "CVC/CVV" ввести: 303
    9. Нажать кнопку "Продолжить"

  *Ожидаемый результат:* У поля ввода "Месяц" сообщения об ошибке "Неверно указан срок действия карты". Заявка не отправляется.

16. **Пустая форма заявки "Оплата по карте" не отправляется в банк**

  *Шаги:*

    1. В браузере перейти по адресу localhost:8080
    2. Нажать кнопку "Купить"
    3. Проверить, что название формы - "Оплата по карте"
    4. Нажать кнопку "Продолжить"

  *Ожидаемый результат:* У полей ввода "Номер карты", "Месяц", "Год", "CVC/CVV" появляются сообщения об ошибке "Неверный формат", у поля "Владелец" сообщение об ошибке "Поле обязательно для заполнения". Заявка не отправляется.

17. **Пустая форма заявки "Кредит по данным карты" не отправляется в банк**

  *Шаги:*

    1. В браузере перейти по адресу localhost:8080
    2. Нажать кнопку "Купить в кредит "
    3. Проверить, что название формы - "Кредит по данным карты"
    4. Нажать кнопку "Продолжить"

  *Ожидаемый результат:* У полей ввода "Номер карты", "Месяц", "Год", "CVC/CVV" появляются сообщения об ошибке "Неверный формат", у поля "Владелец" сообщение об ошибке "Поле обязательно для заполнения". Заявка не отправляется.

18. **Заявка "Оплата по карте" не отправляется с невалидными значениями в полях "Номер карты" и "CVC/CVV"**

  *Шаги:*

    1. В браузере перейти по адресу localhost:8080
    2. Нажать кнопку "Купить"
    3. Проверить, что название формы - "Оплата по карте"
    4. В поле "Номер карты" ввести: 5555 5555 
    5. В поле "Месяц" ввести: 08
    6. В поле "Год" ввести: 22
    7. Поле "Владелец" ввести: Ivanov Ivan
    8. В поле "CVC/CVV" ввести: 0
    9. Нажать кнопку "Продолжить"

  *Ожидаемый результат:* У полей ввода "Номер карты" и "CVC/CVV" появляются сообщения об ошибке "Неверный формат". Заявка не отправляется.

19. **Заявка "Кредит по данным карты" не отправляется с невалидными значениями в полях "Номер карты" и "CVC/CVV"**

  *Шаги:*

    1. В браузере перейти по адресу localhost:8080
    2. Нажать кнопку "Купить в кредит "
    3. Проверить, что название формы - "Кредит по данным карты"
    4. В поле "Номер карты" ввести: 5555 5555 
    5. В поле "Месяц" ввести: 08
    6. В поле "Год" ввести: 22
    7. Поле "Владелец": Ivanov Ivan
    8. В поле "CVC/CVV" ввести: 1
    9. Нажать кнопку "Продолжить"

  *Ожидаемый результат:* У полей ввода "Номер карты" и "CVC/CVV" появляются сообщения об ошибке "Неверный формат". Заявка не отправляется.

20. **Заявка "Оплата по карте" не отправляется с символами на кириллице в поле "Владелец"**

  *Шаги:*

    1. В браузере перейти по адресу localhost:8080
    2. Нажать кнопку "Купить"
    3. Проверить, что название формы - "Оплата по карте"
    4. В поле "Номер карты" ввести: 4444 4444 4444 4441 
    5. В поле "Месяц" ввести: 08
    6. В поле "Год" ввести: 22
    7. Поле "Владелец" ввести: Иванов Иван
    8. В поле "CVC/CVV" ввести: 303
    9. Нажать кнопку "Продолжить"

  *Ожидаемый результат:* У поля ввода "Владелец" появляется сообщение об ошибке "Неверный формат". Заявка не отправляется.

19. **Заявка "Кредит по данным карты"  не отправляется с символами на кириллице в поле "Владелец"**

  *Шаги:*

    1. В браузере перейти по адресу localhost:8080
    2. Нажать кнопку "Купить в кредит"
    3. Проверить, что название формы - "Кредит по данным карты"
    4. В поле "Номер карты" ввести: 4444 4444 4444 4441 
    5. В поле "Месяц" ввести: 08
    6. В поле "Год" ввести: 22
    7. Поле "Владелец" ввести: Иванов Иван
    8. В поле "CVC/CVV" ввести: 303
    9. Нажать кнопку "Продолжить"

  *Ожидаемый результат:* У полей ввода "Номер карты" и "CVC/CVV" появляются сообщения об ошибке "Неверный формат". Заявка не отправляется.

20. После успешной заявки "Купить", данные о платеже сохраняются в базе данных PostgreSQL.

  *Шаги:*

    1. Удалить записи из всех таблиц базы данных:
	  - Выполнить clear-postgres-table.cmd
	2. Проверить, что таблицы не содержат записей:
	  - Выполнить select-postgres-table.cmd
	2. В браузере перейти по адресу localhost:8080
    3. Нажать кнопку "Купить"
    4. Проверить, что название формы - "Оплата по карте"
    5. В поле "Номер карты" ввести: 4444 4444 4444 4441 
    6. В поле "Месяц" ввести: 08
    7. В поле "Год" ввести: 22
    8. Поле "Владелец" ввести: Иванов Иван
    9. В поле "CVC/CVV" ввести: 303
    10. Нажать кнопку "Продолжить"
	11. Дождаться сообщения "Успешно. Операция одобрена банком"
	11. Проверить, что в таблицаъ появидись данные об операции:
	  - Выполнить select-postgres-table.cmd

  *Ожидаемый результат:* Таблица payment_entity содержит строку операции оплаты, в поле status значение APPROVED. Таблица order_entity содержит строку операции покупки.

21. После успешной заявки "Купить в кредит", данные о платеже сохраняются в базе данных PostgreSQL.
  *Шаги:*

    1. Удалить записи из всех таблиц базы данных:
	  - Выполнить clear-postgres-table.cmd
	2. Проверить, что таблицы не содержат записей:
	  - Выполнить select-postgres-table.cmd
	2. В браузере перейти по адресу localhost:8080
    3. Нажать кнопку "Купить в кредит"
    4. Проверить, что название формы - "Кредит по данным карты"
    5. В поле "Номер карты" ввести: 4444 4444 4444 4441 
    6. В поле "Месяц" ввести: 08
    7. В поле "Год" ввести: 22
    8. Поле "Владелец" ввести: Иванов Иван
    9. В поле "CVC/CVV" ввести: 303
    10. Нажать кнопку "Продолжить"
	11. Дождаться сообщения "Успешно. Операция одобрена банком"
	11. Проверить, что в таблицаъ появидись данные об операции:
	  - Выполнить select-postgres-table.cmd

  *Ожидаемый результат:* Таблица credit_request_entity содержит строку операции одобрения кредита, в поле status значение APPROVED. Таблица order_entity содержит строку операции покупки.

*TODO: Database tests*
*TODO: Database tests*

23. После отклоненной заявки "Купить", данные о платеже не сохраняются в базе данных PostgreSQL.
22. После отклоненной заявки "Купить в кредит", данные о платеже не сохраняются в базе данных PostgreSQL.
25. После успешной заявки "Купить", данные о платеже сохраняются в базе данных MySQL.
24. После успешной заявки "Купить в кредит", данные о платеже сохраняются в базе данных MySQL.
27. После отклоненной заявки "Купить", данные о платеже не сохраняются в базе данных MySQL.
26. После отклоненной заявки "Купить в кредит", данные о платеже не сохраняются в базе данных MySQL.


### **Перечень используемых инструментов с обоснованием выбора**

1.  Docker, 4 контейнера: 

- aqa-shop
- gate-simulator
- MySQL
- PostgreSQL

2.  Java + JUnit5 + Selenide + Allure + Gradle

- Java + JUnit5 - платформа для реализации сценариев тестирования, позволяет сравнительно небольшим количеством вводимого кода реализовать требуемые автотесты и использовать CI (GitHub Action, Appveyor). Кроме того, в работе с данной платформой у меня есть релевантный опыт, что должно положительно сказаться на времени разработки автотестов.
- Selenide - для более быстрой (в отличие, например, от Selenium) реализации UI тестов.
- Allure - для получение отчетности при минимальных временных затратах на подключение к проекту.
- Gradle - для управления сборкой проекта и возможного использования CI.

### **Перечень и описание возможных рисков при автоматизации**

1. Недостаток времени, в связи с необходимостью первоочередного выполнения других задач. 
2. Ошибки в SUT, не позволяющие получить систему, готовую к началу тестирования. 
3. Аппаратный сбой: временные затраты на ремонт оборудования.
4. Неверно выбран инструмент для создания отчетности и возникает необходимость вносить измененения в код проекта для подключения другого инструмента.
5. Выбытие из строя тестировщика по состоянию здоровья (учитывая эпидемиологическую ситуацию).

### **Интервальная оценка с учётом рисков (в часах)**

1. Без учета рисков - 80 часов разработка, 40 часов выполнение, отдадка, анализ, оформление отчетов
2. С учетом рисков заявленная оценка увеличивается на срок от 168 часов (максимально рекомендованная продолжительность листа нетрудоспособности).
3. Итого: 288 часов.

### **План сдачи работ (когда будут авто-тесты, результаты их прогона и отчёт по автоматизации)**

1. 
